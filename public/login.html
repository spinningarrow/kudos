<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Kudos - Login</title>

		<link rel="stylesheet" href="lib/normalize.css/normalize.css">
		<link rel="stylesheet" href="css/main.css">

		<script src="lib/jquery/dist/jquery.js"></script>
		<script src="dpd.js"></script>
		<script src="js/app.js"></script>

		<script src="lib/react/react.js"></script>
		<script src="lib/react/JSXTransformer.js"></script>
	</head>
	<body>
		<header>
			<h1>Kudos</h1>
			<div class="current-user-badge"></div>
		</header>
		<main class="main-content"></main>
		<section class="user-list-section"></section>
		<aside class="kudos-sidebar"></aside>

		<!-- React components -->
		<script type="text/jsx" src="react/LoginForm.jsx"></script>
		<script type="text/jsx" src="react/CurrentUserBox.jsx"></script>
		<script type="text/jsx" src="react/SignedInUser.jsx"></script>
		<script type="text/jsx" src="react/SignedOutUser.jsx"></script>
		<script type="text/jsx" src="react/Kudos.jsx"></script>
		<script type="text/jsx" src="react/UsersList.jsx"></script>

		<!-- Render stuff on the page -->
		<script type="text/jsx">
			var kudosData = [
				{ author: 'Peter Hunter', text: 'awesome is the new awesome' },
				{ author: 'Jordana Walker', text: 'nice is the new cool' }
			];

			dpd.kudos.get(function (kudos) {
				kudosData = kudos;
				React.render(<KudosBox data={kudosData} />, document.querySelector('aside'));
			});

			React.render(<LoginForm />, document.querySelector('main'));
			var currentUserBox = React.render(<CurrentUserBox />, document.querySelector('.current-user-badge'));
			var kudosBox = React.render(<KudosBox data={kudosData} selectedUser={null} />, document.querySelector('aside'));
			React.render(<UsersList />, document.querySelector('section'));

			function loginDone() {
				dpd.users.me(function (user) {
					currentUserBox.setState({ user: user.fullname });
				});
			}
		</script>
	</body>
</html>
